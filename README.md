# sql-ex.ru
Solutions from https://sql-ex.ru/


# 1. sql-ex.ru - порешать задачи (минимум 30 штук, но чем больше, тем лучше!), внимание на работу join'ов и работу оператора select

# 2. Побольше подготовится в целом по БД (индексы в базах данных, их типы и физическая реализация, представление, партицирование, case)

### 1. Индексы в базах данных

**Индексы** — это специальные структуры данных, которые улучшают скорость поиска и доступа к данным в таблицах. Они работают аналогично указателям в книге.

#### Типы индексов:

- **B-деревья (B-trees)**: Наиболее распространенный тип индекса. Позволяет быстро выполнять операции поиска, вставки и удаления.
  
- **Хеш-индексы**: Используются для быстрого поиска по равенству. Неэффективны для диапазонных запросов.

- **Индексы на основе полнотекстового поиска**: Используются для поиска по текстовым полям. Например, MySQL поддерживает полнотекстовые индексы.

- **Геопространственные индексы**: Используются для работы с географическими данными.

#### Физическая реализация:

Индексы хранятся отдельно от основной таблицы и могут занимать значительное место. При добавлении или изменении данных в таблице индекс также должен обновляться, что может замедлить операции записи.

### 2. Представления (Views)

**Представления** — это виртуальные таблицы, созданные на основе SQL-запросов. Они не хранят данные, а лишь представляют результат выполнения запроса.

#### Преимущества:

- Упрощение сложных запросов.
- Повышение безопасности (можно ограничить доступ к определённым столбцам).
- Удобство работы с агрегированными данными.

#### Недостатки:

- Могут замедлять выполнение запросов, если основаны на сложных запросах или объединениях.
- Не всегда поддерживают все операции (например, вставка/обновление).

### 3. Партиционирование

**Партиционирование** — это метод разделения больших таблиц на более мелкие, управляемые части (партиции), чтобы улучшить производительность и управляемость.

#### Типы партиционирования:

- **По диапазону (Range Partitioning)**: Разделение по диапазону значений (например, даты).
  
- **По списку (List Partitioning)**: Разделение по списку значений.

- **По хешу (Hash Partitioning)**: Разделение на основе хеш-функции для равномерного распределения данных.

#### Преимущества:

- Ускорение операций выборки и управления данными.
- Упрощение архивирования старых данных.

### 4. Конструкция CASE

CASE — это оператор в SQL, который позволяет выполнять условные выражения внутри запросов.

#### Синтаксис:
``` sql
SELECT 
    column_name,
    CASE 
        WHEN condition1 THEN result1
        WHEN condition2 THEN result2
        ELSE default_result
    END AS alias_name
FROM 
    table_name;
```

#### Пример использования:
``` sql
SELECT 
    employee_id,
    salary,
    CASE 
        WHEN salary < 30000 THEN 'Low'
        WHEN salary BETWEEN 30000 AND 60000 THEN 'Medium'
        ELSE 'High'
    END AS salary_category
FROM 
    employees;
```

### Заключение

Эти аспекты баз данных играют важную роль в проектировании и оптимизации систем управления базами данных. Понимание индексов, представлений, партиционирования и условных операторов позволяет создавать более эффективные и масштабируемые приложения. Если у вас есть дополнительные вопросы или требуется более глубокое объяснение какой-либо темы, дайте знать!

# 3. ER-диаграммы

# 4. Нормальные формы, преимущества и недостатки нормализации

# 5. Схемы "Снежинка" и "Звезда"
Схемы "Снежинка" (Snowflake) и "Звезда" (Star) — это модели организации данных в хранилищах данных (data warehouses), которые помогают структурировать данные для аналитики и отчетности.

### Схема "Звезда"
![image](https://github.com/user-attachments/assets/178496de-cfe2-45a3-938a-6cb30e212b6a)

Описание:
- В схеме "Звезда" центральная таблица фактов окружена несколькими таблицами измерений.
- Таблица фактов содержит числовые данные и ключи, связывающие её с таблицами измерений.
- Таблицы измерений содержат атрибуты, которые описывают данные фактов.

Преимущества:
- Простота: структура легко понимается и визуализируется.
- Высокая производительность: запросы обычно быстрее, так как используются простые JOIN-операции между таблицами фактов и измерений.

Недостатки:
- Избыточность: может быть много дублирующихся данных в таблицах измерений, что увеличивает объем хранимых данных.

Пример:
- Таблица фактов: sales (содержит поля sales_id, date_id, product_id, customer_id, amount)
- Таблицы измерений: 
  - date (содержит поля date_id, day, month, year)
  - product (содержит поля product_id, name, category)
  - customer (содержит поля customer_id, name, region)

### Схема "Снежинка"
![image](https://github.com/user-attachments/assets/8596263e-9abd-4b64-a265-9d1cc79f23af)

Описание:
- В схеме "Снежинка" таблицы измерений нормализованы, то есть разбиты на дополнительные подтаблицы.
- Это приводит к более сложной структуре, где таблицы измерений могут иметь свои собственные подтаблицы.

Преимущества:
- Снижение избыточности: нормализация уменьшает дублирование данных.
- Более гибкая структура: можно легко добавлять новые уровни детализации.

Недостатки:
- Сложность: структура более сложная, что может затруднить понимание и написание запросов.
- Производительность: запросы могут быть медленнее из-за необходимости выполнения большего количества JOIN-операций.

Пример:
- Таблица фактов: sales (аналогично схеме "Звезда")
- Таблицы измерений:
  - date (аналогично)
  - product (содержит поля product_id, name, category_id)
  - category (содержит поля category_id, category_name)
  - customer (аналогично, может быть разбита на подтаблицы, например, по регионам)

### Выбор между схемами

Выбор между схемами "Звезда" и "Снежинка" зависит от требований проекта:
- Если приоритетом является простота и скорость выполнения запросов, лучше использовать схему "Звезда".
- Если важна экономия пространства и минимизация избыточности данных, стоит рассмотреть схему "Снежинка". 

Каждая схема имеет свои плюсы и минусы, и выбор зависит от конкретных задач и условий.

# 6. Почитать про аналитические функции (например, Том Кайт, "Oracle для профессионалов" глава 12)
